<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Rg Speak</title>

    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"
    />
    <link rel="stylesheet" href="./index.css" />
    <link rel="stylesheet" href="../../src/stylesheets/fonts/font.css" />

    <script
      src="https://code.jquery.com/jquery-3.7.1.slim.min.js"
      integrity="sha256-kmHvs0B+OpCW5GVHUNjv9rOmY0IvSIRcf7zGUDTDQM8="
      crossorigin="anonymous"
    ></script>
    <script src="https://cdn.jsdelivr.net/npm/@lottiefiles/lottie-player@2.0.4/dist/lottie-player.min.js"></script>

    <script src="./js/recorder.js"></script>
    <script src="./js/UseAudio.js"></script>
    <script src="./js/libSelvySTT_Edu_ENG.js"></script>
    <script src="./js/libSelvySTT_Edu_ENG_JS.js"></script>

    <script src="./js/speak.js"></script>

    <script>
      if (localStorage.getItem('install') === 1) {
        SelvySTT_Edu_ENG_Init()
        selvySetting()
        initAudio(onInitAudioSucc())
      } else {
        loadDB()
      }
    </script>
  </head>
  <body style="padding: 0; margin: 0">
    <!-- header -->
    <div class="wrapper-header">
      <button class="btn-exit" onclick="window.parent.onExitStudy()"></button>
    </div>

    <!-- contents -->
    <div class="speak-body">
      <div id="ebookViewer" class="ebook-viewer"></div>
    </div>

    <!-- contents: mobile -->
    <!-- <div class="speak-body">
      <div id="ebookViewerMobile" class="ebook-viewer"></div>
    </div> -->

    <!-- play bar -->
    <div>
      <div class="play-bar">
        <div class="progress">
          <div class="progress-bar"></div>
        </div>

        <!-- play bar 내부에 아이콘이 들어갈 곳 -->
        <div class="wrapper-anims"></div>
      </div>
    </div>

    <script>
      // 이북 뷰어 리사이즈 (PC)
      function updateWindowHeight() {
        let windowHeight = window.innerHeight
        let eBookViewerScale = (windowHeight - 92) / 750
        let eBookViewer = document.getElementById('ebookViewer')
        eBookViewer.style.transform = `scale(${eBookViewerScale})`
      }
      updateWindowHeight()
      window.addEventListener('resize', function () {
        updateWindowHeight()
      })

      // 이북 뷰어 리사이즈 (모바일)
      // function updateWindowWidth() {
      //   // 도서 레벨 (K: 480, 그외 : 525)
      //   let bookLevel = 'K'
      //   let windowWidth = window.innerWidth
      //   let eBookSizeW = bookLevel === 'K' ? 480 : 525
      //   let eBookMobileViewerScale = windowWidth / eBookSizeW
      //   let mobilePositionTopSubtractValue =
      //     ((windowWidth / eBookSizeW) * 750) / 2
      //   let eBookViewerMobile = document.getElementById('ebookViewerMobile')
      //   eBookViewerMobile.style.transform = `scale(${eBookMobileViewerScale})`
      //   eBookViewerMobile.style.top = `calc(50% - ${
      //     mobilePositionTopSubtractValue + 4
      //   }px)`
      // }
      // updateWindowWidth()
    </script>
  </body>
</html>
